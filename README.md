# YuaiDJs: Your User-Activated Interface by Dynamic JavaScript üöÄ‚ú®
**YuaiDJs** ‚Äî —ç—Ç–æ –ª—ë–≥–∫–∏–π JavaScript-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫, —Å–æ–∑–¥–∞–Ω–Ω—ã–π —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è —Ç–µ—Ö, –∫—Ç–æ –º–µ—á—Ç–∞–µ—Ç –±–æ—Ä–æ–∑–¥–∏—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥-–∫–æ—Å–º–æ—Å –Ω–∞ –≤—ã—Å–æ–∫–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏, –ø–æ–ª—É—á–∞—Ç—å –¥–∞–Ω–Ω—ã–µ —Å —Å–µ—Ä–≤–µ—Ä–æ–≤ –≥–∞–ª–∞–∫—Ç–∏–∫–∏ –∏ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ —Å–∏–≥–Ω–∞–ª—É –∏–∑ –≥–∏–ø–µ—Ä–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞.  
–î–∞-–¥–∞, –æ–Ω –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—Å—ë: **–≥–∏–¥—Ä–∞—Ü–∏—é**, **fetch**, **WebSocket**, **—Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å**, **—Ä–æ—É—Ç–∏–Ω–≥** –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —Å–µ—Ä–≤–µ—Ä–Ω—ã–º —Ä–µ–Ω–¥–µ—Ä–æ–º `yuairender` https://github.com/cthvlab/yuairender.

> üöÄ –ë—ã—Å—Ç—Ä—ã–π.  
> üß† –£–º–Ω—ã–π.  
> üè¥‚Äç‚ò†Ô∏è –í–µ—Å—ë–ª—ã–π.  
> üì¶ –û–¥–∏–Ω JS-—Ñ–∞–π–ª, –Ω–∏–∫–∞–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.


## üß© –ß—Ç–æ —É–º–µ–µ—Ç —ç—Ç–æ—Ç –ª–µ—Ç–∞—é—â–∏–π –∫–æ—Ä–∞–±–ª—å?

| –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å                | –û–ø–∏—Å–∞–Ω–∏–µ                                                                 |
|---------------------------|--------------------------------------------------------------------------|
| ‚ö° –†–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å            | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ DOM –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö (`Reactive`)         |
| üíß –ì–∏–¥—Ä–∞—Ü–∏—è               | –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —É–∂–µ –æ—Ç—Ä–µ–Ω–¥–µ—Ä–µ–Ω–Ω–æ–º—É HTML –æ—Ç `yuairender` (`hydrateComponent`) |
| üåê WebSocket               | –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ (–±–µ–∑ fetch!)                         |
| üõ∞Ô∏è Fetch                 | –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ JSON-–¥–∞–Ω–Ω—ã—Ö —Å API                                   |
| üß≠ –†–æ—É—Ç–∏–Ω–≥                | SPA-–Ω–∞–≤–∏–≥–∞—Ü–∏—è –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–æ–∫ (`Router`)                               |
| üîÆ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤   | –ü–µ—Ä–µ—Ö–æ–¥—ã –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º –µ—â—ë –±—ã—Å—Ç—Ä–µ–µ!                                       |

---

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞

–ü—Ä–æ—Å—Ç–æ –ø–æ–¥–∫–ª—é—á–∏ —Å–∫—Ä–∏–ø—Ç –∫ —Å–≤–æ–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ (–∏–ª–∏ –∑–∞–≥—Ä—É–∑–∏ –ª–æ–∫–∞–ª—å–Ω–æ):

```html
<script src="yuaidjs.js"></script>
```

–ò –≤—É–∞–ª—è! –£ —Ç–µ–±—è –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≥–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç `window.YuaidJS`.

---

## üöÄ –ü—Ä–∏–º–µ—Ä: –≥–∏–¥—Ä–∞—Ü–∏—è —Å `yuairender`

```html
<div id="app"></div>

<script>
  // –î–∞–Ω–Ω—ã–µ –ø—Ä–∏–ª–µ—Ç–µ–ª–∏ —Å —Å–µ—Ä–≤–µ—Ä–∞ –≤ –º–æ–º–µ–Ω—Ç –ø–µ—Ä–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:
  window.__INITIAL_DATA__ = {
    pirates: [
      { "s.name": "–ß–µ—Ä–Ω–∞—è –∂–µ–º—á—É–∂–∏–Ω–∞", "p.name": "–î–∂–µ–∫ –í–æ—Ä–æ–±–µ–π" },
      { "s.name": "–ß–µ—Ä–Ω–∞—è –∂–µ–º—á—É–∂–∏–Ω–∞", "p.name": "–£–∏–ª–ª –¢—ë—Ä–Ω–µ—Ä" }
    ]
  };

  const { hydrateComponent, pirateTemplate, Router } = window.YuaidJS;

  const component = hydrateComponent('app', pirateTemplate, {
    pirates: window.__INITIAL_DATA__.pirates
  });

  const routes = {
    '/': '/api/pirates',
    '/ships': '/api/ships'
  };

  new Router(routes, (path, url) => {
    component.reactiveData.fetchData(url);
  });
</script>
```

---

## üîå –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ WebSocket

```js
component.reactiveData.connectWebSocket('wss://–ø–∏—Ä–∞—Ç—Å–∫–∏–π-—Å–µ—Ä–≤–µ—Ä.–∑–≤/—Å–∏–≥–Ω–∞–ª—ã');
```

–¢–µ–ø–µ—Ä—å –ª—é–±—ã–µ –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏–ª–µ—Ç—è—Ç —Å —Å–µ—Ä–≤–µ—Ä–∞ ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤—è—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å. –ù–∏–∫–∞–∫–æ–≥–æ fetch, —Ç–æ–ª—å–∫–æ –Ω–∞—Å—Ç–æ—è—â–∏–π —Å–∏–≥–Ω–∞–ª –∏–∑ –≥–ª—É–±–∏–Ω –∫–æ—Å–º–æ—Å–∞.

---

## ‚ú® –®–∞–±–ª–æ–Ω –ø–∏—Ä–∞—Ç–æ–≤

```js
function pirateTemplate(data) {
  const pirates = Array.isArray(data.pirates) ? data.pirates : [];
  const ship = pirates.length && pirates[0]["s.name"] ? pirates[0]["s.name"] : "";
  return `
    <h1>${ship}</h1>
    ${pirates.map(p => `<p>–°–æ–∫—Ä–æ–≤–∏—â–µ: ${p["p.name"]}</p>`).join('')}
    ${pirates.length ? '<footer>–≠–∫–∏–ø–∞–∂ –≥–æ—Ç–æ–≤</footer>' : ''}
  `;
}
```

---

## ‚öì API –∫—Ä–∞—Ç–∫–æ

### `new YuaidJS.Reactive(data)`
–°–æ–∑–¥–∞—ë—Ç —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö.

### `reactive.set(key, value)`
–û–±–Ω–æ–≤–ª—è–µ—Ç –æ–¥–Ω–æ –ø–æ–ª–µ.

### `reactive.replace(newData)`
–ó–∞–º–µ–Ω—è–µ—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ.

### `reactive.fetchData(url)`
–ó–∞–≥—Ä—É–∂–∞–µ—Ç JSON –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ.

### `reactive.connectWebSocket(wsUrl)`
–ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É –ø–æ WebSocket –∏ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç JSON.

### `new YuaidJS.Component(templateFn, data, elId, hydrate?)`
–°–æ–∑–¥–∞—ë—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, —É–ø—Ä–∞–≤–ª—è–µ—Ç DOM –Ω–∞ –æ—Å–Ω–æ–≤–µ —à–∞–±–ª–æ–Ω–∞ –∏ –¥–∞–Ω–Ω—ã—Ö.

### `YuaidJS.hydrateComponent(elId, templateFn, data)`
–ì–∏–¥—Ä–∏—Ä—É–µ—Ç —É–∂–µ –æ—Ç—Ä–µ–Ω–¥–µ—Ä–µ–Ω–Ω—ã–π HTML.

### `new YuaidJS.Router(routes, onNavigate)`
SPA-–Ω–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ `data-link` –∏ `popstate`.

---

## üõ† –û—Ç–ª–∞–¥–∫–∞

–í–∫–ª—é—á–∏ —Ñ–ª–∞–≥ –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω—ã—Ö –ª–æ–≥–æ–≤:

```js
YuaidJS.debug = true;
```



## üß™ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

- ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º —Å –ª—é–±—ã–º–∏ –±—ç–∫–µ–Ω–¥–∞–º–∏, –æ—Å–æ–±–µ–Ω–Ω–æ —Å [yuairender](https://github.com/cthvlab/yuairender)
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –≤ –ª—é–±–æ–º –±—Ä–∞—É–∑–µ—Ä–µ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π `ES6`
- ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç —Å–±–æ—Ä—â–∏–∫–æ–≤, —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤ –∏ —Ç–∞–Ω—Ü–µ–≤ —Å –±—É–±–Ω–æ–º



## ü§ù –õ–∏—Ü–µ–Ω–∑–∏—è

–°–≤–æ–±–æ–¥–µ–Ω –∫–∞–∫ –∫–æ—Å–º–æ—Å.  
–õ–µ—Ç–∏ –∏ –≥—Ä–∞–±—å –≥–∞–ª–∞–∫—Ç–∏–∫–∏, –∫–∞–ø–∏—Ç–∞–Ω!



–•–æ—á–µ—à—å —Ä–∞—Å—à–∏—Ä–∏—Ç—å —à—Ö—É–Ω—É? –î–æ–±–∞–≤—å –∞–Ω–∏–º–∞—Ü–∏–∏, –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–ª–∏ —Å–≤–æ—é —Å–∏—Å—Ç–µ–º—É —Å–æ–±—ã—Ç–∏–π ‚Äî —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –Ω–µ –º–µ—à–∞–µ—Ç, —Ç–æ–ª—å–∫–æ –ø–æ–º–æ–≥–∞–µ—Ç.  
YuaidJS ‚Äî –º–∞–ª–µ–Ω—å–∫–∏–π, –Ω–æ –¥–µ—Ä–∑–∫–∏–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ —é–Ω—ã—Ö –∫–æ—Å–º–∏—á–µ—Å–∫–∏—Ö –ø–∏—Ä–∞—Ç–æ–≤! üè¥‚Äç‚ò†Ô∏èüõ∏

